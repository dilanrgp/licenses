<dialog id="modal-license-terms" class="modal">
    <app-toast-message/>

    @if(loading()){
		<div class="overlay">
		  <span class="loading loading-spinner text-secondary"></span>
		</div>
	}
    <div class="modal-box max-w-7xl">
        <form method="dialog">
            <button type="button" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2" (click)="onClose()">✕</button>
        </form>

        <form [formGroup]="termsForm" (ngSubmit)="onSubmit()">
            <div class="flex justify-between items-center mb-4 mt-5">
                <div>
                    <h3 class="text-xl font-bold">{{ 'terms_condition.modal.title' | changeLanguage}} </h3>
                </div>
                <button class="btn btn-xs btn-secondary rounded-sm">{{ 'common.button_save' | changeLanguage}}</button>
            </div>
            <div class="flex-1 flex flex-col mb-2">
                <label class="label text-sm text-base-content">
                    @if (loadingDefault()){
                        <span class="loading loading-spinner loading-xs"></span>
                    }
                    <!--  -->
                    @else {
                        @if (defaultTerm() == false) {
                        <input type="checkbox" checked="checked" class="toggle toggle-xs" [class.toggle-success]="termsForm.get('default')?.value" formControlName="default" />
                        }
                        <!--  -->
                        @else {
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <g fill="none">
                                        <path fill="currentColor"
                                            d="M4.565 12.407a.75.75 0 1 0-1.13.986zM7.143 16.5l-.565.493a.75.75 0 0 0 1.13 0zm8.422-8.507a.75.75 0 1 0-1.13-.986zm-5.059 3.514a.75.75 0 0 0 1.13.986zm-.834 3.236a.75.75 0 1 0-1.13-.986zm-6.237-1.35l3.143 3.6l1.13-.986l-3.143-3.6zm4.273 3.6l1.964-2.25l-1.13-.986l-1.964 2.25zm3.928-4.5l1.965-2.25l-1.13-.986l-1.965 2.25zm1.965-2.25l1.964-2.25l-1.13-.986l-1.964 2.25z" />
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                            stroke-width="1.5" d="m20 7.563l-4.286 4.5M11 16l.429.563l2.143-2.25" />
                                    </g>
                                </svg>
                        }
                        {{ 'terms_condition.modal.default' | changeLanguage}}
                    }
                </label>
            </div>
            
            <div class="flex flex-col lg:flex-row gap-6 h-[70vh]">
                <!-- Español -->
                 
                <div class="flex-1 flex flex-col">
                    <h4 class="text-lg font-semibold mb-2">{{ 'terms_condition.modal.spanish_version' | changeLanguage }}</h4>

                    <fieldset class="fieldset gap-0 py-0">
                        <legend class="fieldset-legend" [class.input-error]="isInvalid('title_es')">
                            {{ 'terms_condition.table.title' | changeLanguage }}
                        </legend>
                        <input type="text" class="input grow w-full" [placeholder]="'terms_condition.table.title' | changeLanguage" formControlName="title_es" [class.input-error]="isInvalid('title_es')"/>
                        <form-error-label [control]="termsForm.get('title_es')!" />
                    </fieldset>

                    <fieldset class="fieldset gap-0 py-0">
                        <legend class="fieldset-legend" [class.input-error]="isInvalid('description_es')">
                            {{ 'terms_condition.table.description' | changeLanguage }}
                        </legend>
                        <div [class]="isInvalid('description_es', 'border rounded border-red-500')">
                            <quill-editor class="h-60 w-full" theme="snow" [placeholder]="'terms_condition.table.description' | changeLanguage" formControlName="description_es" [modules]="modules"></quill-editor>
                        </div>
                        <form-error-label [control]="termsForm.get('description_es')!" />
                    </fieldset>
                </div>

                <div class="divider lg:divider-horizontal"></div>

                <!-- Inglés -->
                <div class="flex-1 flex flex-col">
                    <h4 class="text-lg font-semibold mb-2">{{ 'terms_condition.modal.english_version' | changeLanguage }}</h4>

                    <fieldset class="fieldset gap-0 py-0">
                        <legend class="fieldset-legend" [class.input-error]="isInvalid('title_en')">
                            {{ 'terms_condition.table.title' | changeLanguage }}
                        </legend>
                        <input type="text" class="input grow w-full" [placeholder]="'terms_condition.table.title' | changeLanguage" formControlName="title_en" [class.input-error]="isInvalid('title_en')"/>
                        <form-error-label [control]="termsForm.get('title_en')!" />
                    </fieldset>

                    <fieldset class="fieldset gap-0 py-0">
                        <legend class="fieldset-legend" [class.input-error]="isInvalid('description_en')">
                            {{ 'terms_condition.table.description' | changeLanguage }}
                        </legend>
                        <div [class]="isInvalid('description_en', 'border rounded border-red-500')">
                            <quill-editor class="h-60 w-full" theme="snow" [placeholder]="'terms_condition.table.description' | changeLanguage" formControlName="description_en" [modules]="modules"></quill-editor>
                        </div>
                        <form-error-label [control]="termsForm.get('description_en')!" />
                    </fieldset>
                </div>
            </div>
        </form>
    </div>
</dialog>